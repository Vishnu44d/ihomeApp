(this.webpackJsonpihome=this.webpackJsonpihome||[]).push([[0],{117:function(e,t,a){e.exports=a(251)},122:function(e,t,a){},123:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(21),o=a.n(i),s=(a(122),a(10)),c=a(11),l=a(15),u=a(13),m=a(14),d=(a(123),a(37)),h=a(8),p=a(18),f=a(254),v=a(255),g=a(256),b=a(257),E=a(258),O=a(259),y=a(260),j=a(261),k=a(262),N=a(108),x=a(263),S=a(109),w=a(253),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={size:a.props.size},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w.a,{size:this.state.size,type:"grow",color:"danger"}),r.a.createElement(w.a,{size:this.state.size,type:"grow",color:"warning"}),r.a.createElement(w.a,{size:this.state.size,type:"grow",color:this.props.lastColor}))}}]),t}(n.Component),_=new(function(){function e(){Object(s.a)(this,e),this.authenticated=!1}return Object(c.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e()}},{key:"logout",value:function(e){this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),T={dev_url:"http://3.19.76.57:8080/"},L=T.dev_url;function D(){localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("teacher"),localStorage.removeItem("email")}function I(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(console.log(a),!e.ok){400===e.status&&(D(),console.log(a.message));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var z={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("".concat(L,"user/login"),a).then(I).then((function(a){return a&&(a.authdata=window.btoa(e+":"+t),localStorage.setItem("token",a.token),localStorage.setItem("email",a.email)),a})).catch((function(e){return{status:"fail",message:"Connection refused"}}))},logout:D,signup:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(L,"user/register"),t).then(I).then((function(e){return e&&console.log("Success!!"),e})).catch((function(e){return{status:"fail",message:"Connection refused"}}))}},q=a(77),A=(a(145),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).notify=function(){return Object(q.b)(a.state.msg)};var n=a.props.msg;return a.state={msg:n},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.notify()}},{key:"render",value:function(){return r.a.createElement(q.a,null)}}]),t}(n.Component)),V=a(19),F=function(e){return{type:"LOGIN",token:e}},P=function(e){return{type:"FREQ",freq:e}},R=function(e){return{type:"DURATION",duration:e}},G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",submitted:!1,error:"",loading:!1,isSuccess:!0},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleLogin=a.handleLogin.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(d.a)({},a,n))}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),console.log(this.state);var a=this.state,n=a.username,r=a.password;n&&r&&(this.setState({loading:!0}),z.login(n,r).then((function(e){"fail"===e.status?t.setState({error:e.message,loading:!1,isSuccess:!1}):(t.props.setToken(e.token),t.setState({isSuccess:!0}),_.login((function(){t.props.history.push("/dashbord/")})))})),console.log(this.state.error),this.setState({isSuccess:!0}))}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=(e.submitted,e.loading),i=e.error;return r.a.createElement("div",{style:{minHeight:"1vh",height:"100%"}},r.a.createElement("div",{className:"app flex-row align-items-center align-middle justify-content-center"},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(v.a,{className:"justify-content-center"},r.a.createElement(g.a,{md:"8"},r.a.createElement(b.a,null,r.a.createElement(E.a,{className:"p-4"},r.a.createElement(O.a,null,r.a.createElement(y.a,null,r.a.createElement("h1",null,"Login"),r.a.createElement("p",{className:"text-muted"},"Sign In to your account"),r.a.createElement(j.a,{className:"mb-3"},r.a.createElement(k.a,{addonType:"prepend"},r.a.createElement(N.a,null,r.a.createElement(p.d,{icon:"user-alt"}))),r.a.createElement(x.a,{type:"text",placeholder:"Username",autoComplete:"username",name:"username",value:t,onChange:this.handleChange})),r.a.createElement(j.a,{className:"mb-4"},r.a.createElement(k.a,{addonType:"prepend"},r.a.createElement(N.a,null,r.a.createElement(p.d,{icon:"key"}))),r.a.createElement(x.a,{type:"password",placeholder:"Password",autoComplete:"current-password",name:"password",value:a,onChange:this.handleChange})),r.a.createElement(v.a,null,r.a.createElement(g.a,{xs:"6"},r.a.createElement(S.a,{className:"px-4 grey darken-3",disabled:n,onClick:this.handleLogin},n?r.a.createElement(C,{size:"sm"}):"Login")),r.a.createElement(g.a,{xs:"6",className:"text-right"}))))),r.a.createElement(E.a,{className:"text-white grey darken-3 py-5 d-md-down-none"},r.a.createElement(O.a,{className:"text-center"},r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome to ihome"),r.a.createElement("p",null,"Get in touch with the creator of the app to get your admin id and password")))))))),!0===this.state.isSuccess?r.a.createElement("div",null):r.a.createElement(A,{msg:i})))}}]),t}(n.Component),M=Object(V.b)((function(e){return{isLoggedIn:e.isLoggedIn,token:e.token}}),(function(e){return{setToken:function(t){return e(F(t))}}}))(G),W=a(75),H=a(264),U=a(265),J=a(266),B=a(267),X=a(268),Q=a(269),Z=a(270),$=a(271),K=a(272),Y=a(273),ee=a(274),te=a(275),ae=a(20),ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,btnDropleft:!1,isOpenProfile:!1,loading:!1,logout:!1,devices:[]},a.toggle=a.toggle.bind(Object(h.a)(a)),a.handleLogout=a.handleLogout.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log(e),e.isLoggedIn&&null!==e&&(console.log("Calling from Nav After props"),this.setState({devices:e.devices}))}},{key:"handleLogout",value:function(e){var t=this;e.preventDefault(),z.logout(),this.props.logoutAction(),_.logout((function(){t.setState({logout:!0,devices:[]}),t.props.history.push("/")})),console.log("Logout ",this.state.logout),console.log("isAuth ",_.isAuthenticated())}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this,t=this.state.isOpen,a=this.state.btnDropleft,n=this.state.loading;return r.a.createElement("div",null,r.a.createElement(H.a,{className:"grey darken-3",light:!0,expand:"md",style:{marginBottom:"50px"}},r.a.createElement(ae.b,{to:"/"},r.a.createElement(U.a,{href:"/",className:"text-white"},"iHome")),r.a.createElement(J.a,{onClick:this.toggle}),r.a.createElement(B.a,{isOpen:t,navbar:!0,className:"text-white"},r.a.createElement(X.a,{className:"mr-auto",navbar:!0},r.a.createElement(Q.a,null,r.a.createElement(ae.b,{to:"/dashbord"},r.a.createElement(Z.a,{className:"text-white"},"Dashboard"))),r.a.createElement(Q.a,null,r.a.createElement(ae.b,{to:"/editdevices"},r.a.createElement(Z.a,{className:"text-white"},"Edit"))),r.a.createElement(Q.a,null,r.a.createElement(Z.a,{href:"",className:"text-white"},"GitHub")),r.a.createElement($.a,{nav:!0,inNavbar:!0},r.a.createElement(K.a,{nav:!0,caret:!0,className:"text-white"},"Devices"),r.a.createElement(Y.a,{right:!0,className:"text-white"},0===this.state.devices.length?r.a.createElement(ee.a,null,"No device."):this.state.devices.map((function(e,t){return r.a.createElement(ee.a,{key:t},r.a.createElement(ae.b,{to:"/devices/".concat(e.name)},r.a.createElement("span",null,e.name)))}))))),r.a.createElement(te.a,null,_.isAuthenticated()?r.a.createElement(W.a,{direction:"left",isOpen:a,toggle:function(){e.setState({btnDropleft:!e.state.btnDropleft})}},r.a.createElement(K.a,{color:"light",caret:!0},r.a.createElement(p.d,{icon:"user-alt"})),r.a.createElement(Y.a,null,r.a.createElement(ee.a,null,r.a.createElement(ae.b,{to:"/profile"},r.a.createElement("span",{className:"text-black"},"View Profile"))),r.a.createElement(ee.a,null,r.a.createElement(S.a,{to:"/",className:"px-4 grey darken-3",disabled:n,onClick:this.handleLogout},n?r.a.createElement(C,{size:"sm"}):r.a.createElement("span",{className:"text-white"},"Logout"))))):r.a.createElement("p",null)))))}}]),t}(n.Component),re=Object(V.b)((function(e){return{isLoggedIn:e.isLoggedIn,token:e.token,devices:e.devices}}),(function(e){return{setToken:function(t){return e(F(t))},logoutAction:function(){return e({type:"LOGOUT"})}}}))(ne),ie=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"page-footer font-small grey darken-3 ",style:{marginTop:"50px"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 py-5"},r.a.createElement("div",{className:"mb-5 flex-center"},r.a.createElement("a",{className:"fb-ic"},r.a.createElement("i",{className:"fab fa-facebook-f fa-lg white-text mr-md-5 mr-3 fa-2x"}," ")),r.a.createElement("a",{className:"tw-ic"},r.a.createElement("i",{className:"fab fa-twitter fa-lg white-text mr-md-5 mr-3 fa-2x"}," ")),r.a.createElement("a",{className:"gplus-ic"},r.a.createElement("i",{className:"fab fa-google-plus-g fa-lg white-text mr-md-5 mr-3 fa-2x"}," ")),r.a.createElement("a",{className:"li-ic"},r.a.createElement("i",{className:"fab fa-linkedin-in fa-lg white-text mr-md-5 mr-3 fa-2x"}," ")),r.a.createElement("a",{className:"ins-ic"},r.a.createElement("i",{className:"fab fa-instagram fa-lg white-text mr-md-5 mr-3 fa-2x"}," ")),r.a.createElement("a",{className:"pin-ic"},r.a.createElement("i",{className:"fab fa-pinterest fa-lg white-text fa-2x"}," ")))))),r.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2020 Copyright:",r.a.createElement("a",{href:"/"}," ihome")))}}]),t}(n.Component),oe=a(33),se=a(280),ce=a(276),le=T.dev_url,ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={rangeValue:a.props.data.currentValue,loading:!1,name:a.props.data.device},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({rangeValue:this.props.data.currentValue})}},{key:"handleChange",value:function(e){var t=this;e.preventDefault();var a=e.target.value,n=e.target,r=n.name,i=n.value;this.setState(Object(d.a)({},r,i)),this.setState({loading:!0}),console.log(a),console.log(this.props.data.device),fetch("".concat(le,"device/intensity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_name:this.props.data.device,token:this.props.token,intensity:a})}).then((function(e){return e.json()})).then((function(e){if("published"===e.message);else{var a=t.state.status?"OFF":"ON";t.setState({status:!t.state.status,label:a})}t.setState({loading:!1})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"text-center"},"Slide the slider to increase/decrease the intensity."),r.a.createElement(p.c,{className:"d-flex justify-content-right"},r.a.createElement(j.a,{size:"sm"},r.a.createElement(se.a,{type:"range",min:this.props.data.min,max:this.props.data.max,value:this.state.rangeValue,onChange:this.handleChange,name:"rangeValue",inline:!0,style:{width:"62%",padding:"1rem"},id:"",disabled:this.state.loading}),r.a.createElement(k.a,{addonType:"append"},r.a.createElement(S.a,{color:"dark"},r.a.createElement(ce.a,{color:"light"},this.state.rangeValue),r.a.createElement("span",{style:{paddingLeft:"5px"}},"SET"))))))}}]),t}(n.Component),me=Object(V.b)((function(e){return{token:e.token}}),(function(e){return{}}))(ue),de=a(76),he=a(110),pe=a(23),fe=a.n(pe),ve=a(46),ge=T.dev_url,be=function(){var e=Object(ve.a)(fe.a.mark((function e(t,a){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(ge,"device/getlatestdata"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,token:a})}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(ve.a)(fe.a.mark((function e(t,a){var n,r,i,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,a);case 2:return n=e.sent,r=n.data[0],console.log(r),i=r.time,o=r.last,e.abrupt("return",{label:i,data:o});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(ve.a)(fe.a.mark((function e(t,a,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(ge,"device/getrangedata"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,duration:a,token:n})}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ye=function(){var e=Object(ve.a)(fe.a.mark((function e(t,a,n){var r,i,o,s,c,l;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,Oe(t,a,n);case 3:for(r=e.sent,i=r.data,console.log(r),o=[],s=[],c=0;c<i.length;c++)l=i[c],o.push(new Date(l.time)),s.push(l.value);return console.log(o),console.log(s),e.abrupt("return",{label:o,data:s});case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),je=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{minHeight:this.props.size}})}}]),t}(n.Component),ke=function(e){function t(e){var a;Object(s.a)(this,t);var n=(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.my_freq,r=a.props.my_duration;return a.state={labels:[],data:[],name:a.props.title,device_id:a.props.device_id,freq:n,duration:r},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.my_freq,n=e.my_duration,r=e.init_data,i=e.device_id;this.setState({labels:[],data:[],device_id:i});var o=a,s=n;this.setState({freq:o,duration:s});var c=r;this.setState({labels:c.label,data:c.data}),clearInterval(this.interval),this.interval=setInterval((function(){Ee(i,t.props.token).then((function(e){t.setState({labels:t.state.labels.concat([e.label]),data:t.state.data.concat([e.data])})}));var e=Object(de.a)(t.state.labels),a=Object(de.a)(t.state.data);e.shift(),a.shift(),t.setState({labels:e,data:a})}),1e3*a)}},{key:"componentDidMount",value:function(){this.setState({id:this.props.device_id})}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e={dataLine:{labels:this.state.labels,datasets:[{label:this.props.label,fill:!0,lineTension:.1,backgroundColor:"rgba(184, 185, 210, .3)",borderColor:"rgb(35, 206, 6)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(35, 26, 136)",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:1,pointHoverRadius:1,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220, 1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:this.state.data}]}};return r.a.createElement(p.c,null,r.a.createElement(je,{size:"30px"}),r.a.createElement(he.a,{data:e.dataLine,options:{responsive:!0,animation:{duration:0},scales:{xAxes:[{type:"time",display:!0,scaleLabel:{display:!0,labelString:"Time"}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"temp in degree c"}}]}}}))}}]),t}(r.a.Component),Ne=Object(V.b)((function(e){return{freq:e.freq,duration:e.duration,token:e.token}}),(function(e){return{setFreq:function(t){return e(P(t))},setMyDuration:function(t){return e(R(t))}}}))(ke);function xe(e,t){console.log(e),console.log(t);for(var a=0;a<t.length;a++){var n=t[a];if(n.name===e)return n}return null}var Se=a(277),we=a(278),Ce=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,{body:!0,inverse:!0,className:"text-center",style:{backgroundColor:"#333",borderColor:"#333"}},r.a.createElement(Se.a,null,this.props.name),r.a.createElement(we.a,{className:"text-left"},this.props.about.map((function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))})))))}}]),t}(n.Component),_e=[{disp:"last 1 min",value:"1m"},{disp:"last 2 min",value:"2m"},{disp:"last 5 min",value:"5m"},{disp:"last 15 min",value:"24h"},{disp:"last 30 min",value:"30m"},{disp:"last 1 hr",value:"1h"},{disp:"last 6 hr",value:"360 m"},{disp:"last 12 hr",value:"720 m"},{disp:"last 24 hr",value:"1400 m"}],Te=[{disp:"last 1 week",value:"1 w"},{disp:"last 2 week",value:"2 w"},{disp:"last 1 month",value:"1 mo"},{disp:"last 6 month",value:"6 mo"},{disp:"last 1 year",value:"6 y"}],Le=[{disp:"2 sec",value:"2 s"},{disp:"5 sec",value:"5 s"},{disp:"10 sec",value:"10 s"},{disp:"20 sec",value:"20 s"},{disp:"60 sec",value:"60 s"}],De=[{disp:"2 min",value:"5 m"},{disp:"3 min",value:"3 m"},{disp:"5 min",value:"5 m"},{disp:"10 min",value:"10 m"}],Ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={data:a.props.data,purpose:a.props.purpose},a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){e.preventDefault();var t=e.target.name;"duration"===this.state.purpose?(this.props.setMyDuration(t),this.setState({data:t})):"refresh rate"===this.state.purpose&&(this.props.setFreq(t),this.setState({data:t}))}},{key:"render",value:function(){var e=this;return r.a.createElement($.a,null,r.a.createElement(K.a,{color:"dark",caret:!0},r.a.createElement("span",{style:{paddingRight:"5px"},className:"text-lowercase"},this.state.data),r.a.createElement(p.d,{icon:this.props.icon})),r.a.createElement(Y.a,null,r.a.createElement(ee.a,{header:!0},this.props.purpose),this.props.shortdurations.map((function(t,a){return r.a.createElement(ee.a,{key:a,onClick:e.handleClick,name:t.value},t.disp)})),r.a.createElement(ee.a,{divider:!0}),this.props.longdurations.map((function(t,a){return r.a.createElement(ee.a,{key:a,onClick:e.handleClick,name:t.value},t.disp)}))))}}]),t}(n.Component),ze=Object(V.b)((function(e){return{freq:e.freq,duration:e.duration}}),(function(e){return{setFreq:function(t){return e(P(t))},setMyDuration:function(t){return e(R(t))}}}))(Ie),qe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={device_name:"",device_id:"",min:null,max:null,monitoring:!1,currentValue:0,location:"",about:[],Graphlabel:"",graphName:"",loading:!1,init_data:{label:[],data:[]},error:!1,err_msg:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.pathname.split("/"),a=xe(t=t[2]+"/"+t[3],this.props.devices);if(null===a)return this.setState({error:!0,err_msg:"No such device!"}),void console.log("r is null");console.log(a),this.setState({loading:!0}),this.setState({device_name:t,device_id:a.id,monitoring:a.monitoring,min:a.min_intensity,max:a.max_intensity,about:[a.desc],location:a.location,currentValue:a.cur_intensity,Graphlabel:a.desc,graphName:a.desc}),a.monitoring&&ye(a.id,this.props.duration,this.props.token).then((function(t){console.log(t),e.setState({init_data:t})})),this.setState({loading:!1}),this.unlisten=this.props.history.listen((function(t,a){e.setState({loading:!0});var n=e.props.history.location.pathname.split("/"),r=xe(n=n[2]+"/"+n[3],e.props.devices);if(null===r)return e.setState({error:!0,err_msg:"No such device!"}),void console.log("r is null");e.setState({device_name:n,device_id:r.id,min:r.min_intensity,max:r.max_intensity,monitoring:r.monitoring,about:[r.desc],location:r.location,currentValue:r.cur_intensity,Graphlabel:r.desc,graphName:r.desc}),r.monitoring&&ye(r.id,e.props.duration,e.props.token).then((function(t){e.setState({init_data:t})})),e.setState({loading:!1})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({loading:!0}),this.state.monitoring&&ye(this.state.device_id,e.duration,this.props.token).then((function(e){console.log(e),t.setState({init_data:e})})),this.setState({loading:!1})}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.device_name,a=e.min,n=e.max,i=e.currentValue,o=e.about,s=e.graphName,c=this.state.init_data;return console.log("INSIDE DEVICES MONTIT:: ",this.state.monitoring),this.state.error?r.a.createElement(A,{msg:this.state.err_msg}):this.state.monitoring?r.a.createElement(p.c,null,r.a.createElement(Ce,{about:o,name:this.state.device_name}),r.a.createElement(je,{size:"50px"}),r.a.createElement(v.a,null,r.a.createElement(g.a,{md:8,sm:1},r.a.createElement("h3",null,s)),r.a.createElement(g.a,{md:4,sm:11},r.a.createElement(v.a,null,r.a.createElement(g.a,{className:"text-right"},r.a.createElement(ze,{shortdurations:Le,longdurations:De,icon:"retweet",purpose:"refresh rate",data:this.props.freq})),r.a.createElement(g.a,{className:"text-left"},r.a.createElement(ze,{shortdurations:_e,longdurations:Te,icon:"clock",purpose:"duration",data:this.props.duration}))))),this.state.loading?r.a.createElement("div",{className:"text-center"},r.a.createElement(je,{size:"75px"}),r.a.createElement(C,{size:"lg",lastColor:"dark"}),r.a.createElement("p",null,"Loading Chart . . ."),r.a.createElement(je,{size:"75px"})):r.a.createElement("div",null,r.a.createElement(Ne,{my_freq:parseInt(this.props.freq),my_duration:parseInt(this.props.duration),init_data:c,device_id:this.state.device_id}),r.a.createElement(je,{size:"50px"}),r.a.createElement(me,{data:{device:t,min:a,max:n,currentValue:i}}))):r.a.createElement(p.c,null,r.a.createElement(Ce,{about:o,name:this.state.device_name}),r.a.createElement(je,{size:"50px"}),r.a.createElement(Ce,{about:["Monitoring is off for this device"],name:"No chart available"}),r.a.createElement(je,{size:"50px"}),r.a.createElement(me,{data:{device:t,min:a,max:n,currentValue:i}}))}}]),t}(n.Component),Ae=Object(V.b)((function(e){return{freq:e.freq,duration:e.duration,token:e.token,devices:e.devices}}),(function(e){return{setFreq:function(t){return e(P(t))},setMyDuration:function(t){return e(R(t))}}}))(qe),Ve=a(279),Fe=T.dev_url,Pe=function(e){function t(e){var a;Object(s.a)(this,t);var n=(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.status?"ON":"OFF";return a.state={status:a.props.status,label:n,loading:!1,name:a.props.name},a.toggle=a.toggle.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(e){var t=this,a=this.state.status?"OFF":"ON";this.setState({loading:!0}),this.setState({status:!this.state.status,label:a});var n="ON"===this.state.label?"OFF":"ON";console.log("OPEARTION:: ",n),fetch("".concat(Fe,"device/toggle"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_name:this.state.name,token:this.props.token,operation:n})}).then((function(e){return e.json()})).then((function(e){if("published"===e.message);else{var a=t.state.status?"OFF":"ON";t.setState({status:!t.state.status,label:a})}t.setState({loading:!1})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.loading?r.a.createElement(C,{size:"sm",lastColor:"light"}):r.a.createElement(se.a,{color:"dark",checked:this.state.status,type:"switch",id:this.props.name,name:"customSwitch",label:this.state.label,onClick:this.toggle,onChange:function(){console.log("changed")}}))}}]),t}(n.Component),Re=Object(V.b)((function(e){return{token:e.token}}),(function(e){return{}}))(Pe),Ge=function(e){return r.a.createElement(Ve.a,{dark:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Name"),r.a.createElement("th",{className:"text-center"},"Location"),r.a.createElement("th",{className:"text-center"},"Status"))),r.a.createElement("tbody",null,e.devices.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"text-center"},r.a.createElement(ae.b,{to:"/devices/".concat(e.name)},r.a.createElement("span",{className:"text-white"},e.name))),r.a.createElement("td",{className:"text-center"},e.location),r.a.createElement("td",{className:"text-center"},r.a.createElement(Re,{name:e.name,status:e.status})))}))))},Me=T.dev_url;function We(e){return fetch("".concat(Me,"device?auth=").concat(e)).then((function(e){return e.json()})).then((function(e){return e.payload}))}var He=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={devices:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.token;fetch("".concat(T.dev_url,"device?auth=").concat(t)).then((function(e){return e.json()})).then((function(t){e.props.setDevices(t.payload),e.setState({devices:t.payload}),console.log(t)})),console.log(We(this.props.token))}},{key:"render",value:function(){return r.a.createElement("div",{style:{marginTop:"-40px"}},r.a.createElement("h3",{className:"text-center"},"All devices"),r.a.createElement("p",{className:"text-left container"},"Here is the list of devices connected to your home. Click on the name of the device if you want to monitor the device."),r.a.createElement("div",{className:"container"},r.a.createElement(Ge,{devices:this.state.devices})))}}]),t}(n.Component),Ue=Object(V.b)((function(e){return{isLoggedIn:e.isLoggedIn,token:e.token,devices:e.devices}}),(function(e){return{setToken:function(t){return e(F(t))},logoutAction:function(){return e({type:"LOGOUT"})},setDevices:function(t){return e({type:"DEVICE",device:t})}}}))(He),Je=function(e){function t(e){var a;Object(s.a)(this,t);var n=(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.name,r=a.props.id;return a.state={name:n,loading:!1,id:r},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSave=a.handleSave.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"handleSave",value:function(e){e.preventDefault();var t=this.state.name;console.log("Saving ... ",t),this.setState({loading:!0}),this.setState({loading:!1})}},{key:"render",value:function(){return r.a.createElement(j.a,{className:"mb-3"},r.a.createElement(x.a,{type:"text",value:this.state.name,name:this.props.name,onChange:this.handleChange}),r.a.createElement(k.a,{addonType:"prepend"},r.a.createElement(N.a,null,this.state.loading?r.a.createElement(C,{size:"sm"}):r.a.createElement("i",{class:"fas fa-save",onClick:this.handleSave}))))}}]),t}(n.Component),Be=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Ve.a,{dark:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Name"),r.a.createElement("th",{className:"text-center"},"Port no"))),r.a.createElement("tbody",null,this.props.devices.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:"text-center",onClick:e.handleEdit,name:t.name},r.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},r.a.createElement(Je,{name:t.name,id:t.id}))),r.a.createElement("td",{className:"text-center"},t.port))}))))}}]),t}(n.Component),Xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={devices:We()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{marginTop:"-40px"}},r.a.createElement("h3",{className:"text-center"},"All devices"),r.a.createElement("p",{className:"text-left container"},"Here is the list of devices connected to your home. Click on the name of the device if you want to monitor the device."),r.a.createElement("div",{className:"container"},r.a.createElement(Be,{devices:this.state.devices})))}}]),t}(n.Component),Qe=a(55),Ze=function(e){var t=e.component,a=Object(Qe.a)(e,["component"]);return r.a.createElement(oe.b,Object.assign({},a,{render:function(e){return _.isAuthenticated()?r.a.createElement(t,e):r.a.createElement(oe.a,{to:{pathname:"/",state:{from:e.location}}})}}))},$e=function(e){var t=e.component,a=Object(Qe.a)(e,["component"]);return r.a.createElement(oe.b,Object.assign({},a,{render:function(e){return _.isAuthenticated()?r.a.createElement(oe.a,{to:{pathname:"/dashbord",state:{from:e.location}}}):r.a.createElement(t,e)}}))},Ke=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;try{var t=window.localStorage.token;"undefined"!==typeof t&&(this.props.setToken(t),_.login((function(){e.props.history.push("/dashbord/")})))}catch(a){console.log(a.toString())}}},{key:"render",value:function(){return console.log(this.props),r.a.createElement(ae.a,null,r.a.createElement(oe.b,{path:"*",component:re}),r.a.createElement($e,{exact:!0,path:"/",component:M}),r.a.createElement($e,{path:"/login",component:M}),r.a.createElement(Ze,{path:"/devices",component:Ae}),r.a.createElement(Ze,{path:"/dashbord",component:Ue}),r.a.createElement(Ze,{path:"/editDevices",component:Xe}),r.a.createElement(ie,null))}}]),t}(n.Component),Ye=Object(V.b)((function(e){return{isLoggedIn:e.isLoggedIn,token:e.token}}),(function(e){return{setToken:function(t){return e(F(t))},logoutAction:function(){return e({type:"LOGOUT"})}}}))(Ke);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(247),a(248),a(249),a(250);var et=a(26),tt=Object(et.c)({isLoggedIn:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return!0;case"LOGOUT":return!1;default:return e}},freq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5 s",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FREQ":return t.freq;default:return e}},duration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24h",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DURATION":return t.duration;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"LOGIN"===t.type?t.token:"LOGOUT"===t.type?null:e},devices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"DEVICE"===t.type?t.device:e}}),at=a(112),nt=a(113),rt=fe.a.mark(it);function it(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(nt.a)([]);case 2:case"end":return e.stop()}}),rt)}var ot=function(){var e=Object(at.a)(),t=Object(et.e)(tt,Object(et.d)(Object(et.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));return e.run(it),t}();o.a.render(r.a.createElement(V.a,{store:ot},r.a.createElement(Ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}));t.default=ot}},[[117,1,2]]]);
//# sourceMappingURL=main.43963099.chunk.js.map